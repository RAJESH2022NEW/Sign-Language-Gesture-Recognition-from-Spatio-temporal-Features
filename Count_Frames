# -*- coding: utf-8 -*-
"""Count_Frames.ipynb

Automatically generated by Colaboratory.

Original file is located at
    https://colab.research.google.com/drive/1avXNP-vXvjfd-l1Oc_z0lxGkPrhKx-Yj
"""

from google.colab import drive
drive.mount('/content/drive')

import cv2
import os
import pickle
import numpy as np
from os.path import join, exists
from tqdm import tqdm

dataset='/content/drive/MyDrive/Colab Notebooks/Dataset/LSA_64'
fcount = []
count = 0
rootPath = '/content/drive/MyDrive/Colab Notebooks/SLGR/Pre_processing'
os.chdir(dataset)
gestures = os.listdir(dataset)

for gesture in gestures:
  
  gesture = os.path.join(dataset, gesture)
  os.chdir(gesture)
  videos = os.listdir(os.getcwd())
  videos = [video for video in videos if(os.path.isfile(video))]

  for video in videos:
    count = count+1
    name = os.path.abspath(video)
    cap = cv2.VideoCapture(name)  
    frameCount = int(cap.get(cv2.CAP_PROP_FRAME_COUNT))
    print(video + ':' + str(frameCount) + '\n')
    fcount.append((frameCount, video))
    os.chdir(gesture)
    cap.release()
    cv2.destroyAllWindows()
os.chdir(rootPath)
fcount.sort(key=lambda x: x[0], reverse=True)
f = open("Frame_Count_in_Videos.txt", "w")

for (a, b) in fcount:
  x = str(a) +" : "+b
  print(x)
  f.write(x+"\n")
f.close()

drive.flush_and_unmount()
